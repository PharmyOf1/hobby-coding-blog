{% extends "base.html" %}
{% load staticfiles %}

{% block content %}
  {% block message_info_homepage %}{% endblock %}

<!-- MAIN POST -->
  {% for object in object_list %}
  {% if forloop.counter == 1 and page_obj.number == 1 %}

    <div class="post">
      <h2><center><a href="{% url 'detail_post_page' slug=object.slug %}">{{ object.title }}</a></center></h2>
      <p class="meta" style="font-size:11px;color:#a9a9a9;">
        {{ object.created|date:"F d, Y" }} -
        <a href="{% url 'author_posts_page' username=object.author.user.username %}">Phil Harm</a>
      </p>
      {% if object.cover %}
        <div class="cst__cover__posts_main">
          <a href="{% url 'detail_post_page' slug=object.slug %}">
            <img style="width:100%" src="/media/{{ object.cover }}" alt="{{ object.title }}" title="{{ object.title }}">
          </a>
        </div>
      {% endif %}

      {{ object.description|safe|striptags|truncatewords:"50"|linebreaks }}
       <div class="text-center">
      <span style="margin-bottom: .5em;">
        <a href="{% url 'detail_post_page' slug=object.slug %}"><button type="button" class="btn btn-secondary btn-sm">Keep Reading</button></a>
      </span>
    </div>
      <div style="clear:both;border-bottom: 1px solid #F2F2F2;margin: 10px 0"></div>
    </div>
    {% else %}
    <div class="post">
      <div class="col-sm-4">
        {% if object.cover %}
          <div class="cst__cover__posts_small">
            <a href="{% url 'detail_post_page' slug=object.slug %}">
              <img style="width:100%" src="/media/{{ object.cover }}" alt="{{ object.title }}" title="{{ object.title }}">
            </a>
          </div>
        {% endif %}</div>
      <div class="col-sm-8">
      <h3><center><a href="{% url 'detail_post_page' slug=object.slug %}">{{ object.title }}</a></center></h3>

      <p class="meta" style="font-size:11px;color:#a9a9a9;">
        {{ object.created|date:"F d, Y" }} -
        <a href="{% url 'author_posts_page' username=object.author.user.username %}">Phil Harm</a>
      </p>

      {{ object.description|safe|striptags|truncatewords:"50"|linebreaks }}
       <div class="text-center">
      <span style="margin-bottom: .5em;">
        <a href="{% url 'detail_post_page' slug=object.slug %}"><button type="button" class="btn btn-secondary btn-sm">Keep Reading</button></a>
      </span>
    </div>
    </div>
    <div style="clear:both;border-bottom: 1px solid #F2F2F2;margin: 10px 0"></div>
    </div>
    {% endif %}
  {% endfor %}

<!-- All Other Posts -->



  {% if is_paginated %}
    {% if request.GET.q %}
      <ul class="pagination">
        <li {% if not page_obj.has_previous %}class="disabled"{% endif %}>
          <a {% if page_obj.has_previous %}href="?q={{ query }}&amp;page={{ page_obj.previous_page_number }}" aria-label="Previous" {% endif %}><span aria-hidden="true">&laquo;</span></a>
        </li>
        <li><a href="?q={{ query }}&amp;page=1">First</a></li>
        {% for linkpage in page_range %}
        {% ifequal linkpage page_obj.number %}
        <li class="active">
          <a>{{ page_obj.number }}<span class="sr-only">(current)</span></a>
        </li>
        {% else %}
        <li><a href="?q={{ query }}&amp;page={{ linkpage }}">{{ linkpage }}</a></li>
        {% endifequal %}
        {% endfor %}
        <li><a href="?q={{ query }}&amp;page={{ page_obj.paginator.num_pages }}">Last</a></li>
        <li {% if not page_obj.has_next %}class="disabled"{% endif %}>
          <a {% if page_obj.has_next %}href="?q={{ query }}&amp;page={{ page_obj.next_page_number }}" aria-label="Next" {% endif %}><span aria-hidden="true">&raquo;</span></a>
        </li>
      </ul>
    {% else %}
      <ul class="pagination">
        <li {% if not page_obj.has_previous %}class="disabled"{% endif %}>
          <a {% if page_obj.has_previous %}href="?page={{ page_obj.previous_page_number }}" aria-label="Previous" {% endif %}><span aria-hidden="true">&laquo;</span></a>
        </li>
        <li><a href="?page=1">First</a></li>
        {% for linkpage in page_range %}
        {% ifequal linkpage page_obj.number %}
        <li class="active">
          <a>{{ page_obj.number }}<span class="sr-only">(current)</span></a>
        </li>
        {% else %}
        <li><a href="?page={{ linkpage }}">{{ linkpage }}</a></li>
        {% endifequal %}
        {% endfor %}
        <li><a href="?page={{ page_obj.paginator.num_pages }}">Last</a></li>
        <li {% if not page_obj.has_next %}class="disabled"{% endif %}>
          <a {% if page_obj.has_next %}href="?page={{ page_obj.next_page_number }}" aria-label="Next" {% endif %}><span aria-hidden="true">&raquo;</span></a>
        </li>
      </ul>
    {% endif %}{# endif request.GET.q #}
  {% endif %}
{% endblock %}
